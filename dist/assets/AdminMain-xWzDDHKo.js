import{r as o,_ as j,R as i,b as p,c as P,P as r,d as B,j as e}from"./index-3iRPG9Bu.js";import{a as C}from"./index.esm-aB2BTCbt.js";import{C as E}from"./CAlert-CS1k0cQ9.js";import{C as T,a as R}from"./CCardBody-ZnA988Qk.js";import{C as W}from"./CCardHeader-D5Sem3LH.js";import{C as S,a as y}from"./CRow-BGaT1TWU.js";import{c as z}from"./cil-user-Ddrdy7PS.js";import{f as U}from"./TeacherContent-4OZygDT1.js";import{c as $}from"./cil-music-note-CvIB2O89.js";import"./CCloseButton-B86-_tbR.js";import"./useForkedRef-DSh7hi_l.js";import"./cil-sun-Cy5DgvOh.js";import"./cil-lock-locked-DmxpJbVL.js";var k=o.createContext({}),b=o.forwardRef(function(s,u){var t,g=s.children,l=s.animated,h=s.className,m=s.color,a=s.value,n=a===void 0?0:a,d=s.variant,x=j(s,["children","animated","className","color","value","variant"]),c=o.useContext(k).stacked;return i.createElement("div",p({className:P("progress-bar",(t={},t["bg-".concat(m)]=m,t["progress-bar-".concat(d)]=d,t["progress-bar-animated"]=l,t),h)},!c&&{style:{width:"".concat(n,"%")}},x,{ref:u}),g)});b.propTypes={animated:r.bool,children:r.node,className:r.string,color:B,value:r.number,variant:r.oneOf(["striped"])};b.displayName="CProgressBar";var v=o.forwardRef(function(s,u){var t=s.children,g=s.className,l=s.height,h=s.progressBarClassName,m=s.thin,a=s.value,n=s.white,d=j(s,["children","className","height","progressBarClassName","thin","value","white"]),x=o.useContext(k).stacked;return i.createElement("div",p({className:P("progress",{"progress-thin":m,"progress-white":n},g)},a!==void 0&&{role:"progressbar","aria-valuenow":a,"aria-valuemin":0,"aria-valuemax":100},{style:p(p({},l?{height:"".concat(l,"px")}:{}),x?{width:"".concat(a,"%")}:{}),ref:u}),i.Children.toArray(t).some(function(c){return c.type&&c.type.displayName==="CProgressBar"})?i.Children.map(t,function(c){if(i.isValidElement(c)&&c.type.displayName==="CProgressBar")return i.cloneElement(c,p(p({},a&&{value:a}),d))}):i.createElement(b,p({},h&&{className:h},{value:a},d),t))});v.propTypes={children:r.node,className:r.string,height:r.number,progressBarClassName:r.string,thin:r.bool,value:r.number,white:r.bool};v.displayName="CProgress";var f=o.forwardRef(function(s,u){var t=s.className,g=s.color,l=s.inverse,h=s.progress,m=s.text,a=s.title,n=s.value,d=j(s,["className","color","inverse","progress","text","title","value"]);return i.createElement(T,p({className:t,color:g},l&&{textColor:"white"},d,{ref:u}),i.createElement(R,null,n&&i.createElement("div",{className:"fs-4 fw-semibold"},n),a&&i.createElement("div",null,a),i.createElement(v,p({className:"my-2",height:4},l&&{white:!0},h)),m&&i.createElement("small",{className:l?"text-white text-opacity-75":"text-body-secondary"},m)))});f.propTypes={className:r.string,color:B,inverse:r.bool,progress:r.object,text:r.string,title:r.oneOfType([r.string,r.node]),value:r.oneOfType([r.string,r.node,r.number])};f.displayName="CWidgetCWidgetStatsB";var q=["512 512","<polygon fill='var(--ci-primary-color, currentColor)' points='376 160 376 192 441.372 192 252 381.373 180 309.373 76.686 412.686 99.314 435.314 180 354.627 252 426.627 464 214.628 464 280 496 280 496 160 376 160' class='ci-primary'/><polygon fill='var(--ci-primary-color, currentColor)' points='48 104 16 104 16 496 496 496 496 464 48 464 48 104' class='ci-primary'/>"],F=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M472,16H168a24,24,0,0,0-24,24V344a24,24,0,0,0,24,24H472a24,24,0,0,0,24-24V40A24,24,0,0,0,472,16Zm-8,320H176V48H464Z' class='ci-primary'/><path fill='var(--ci-primary-color, currentColor)' d='M112,400V80H80V408a24,24,0,0,0,24,24H432V400Z' class='ci-primary'/><path fill='var(--ci-primary-color, currentColor)' d='M48,464V144H16V472a24,24,0,0,0,24,24H368V464Z' class='ci-primary'/>"];const ie=()=>{const[s,u]=o.useState(0),[t,g]=o.useState(0),[l,h]=o.useState(0),[m,a]=o.useState(0),[n,d]=o.useState(!0),[x,c]=o.useState(null),H=()=>localStorage.getItem("authToken")||"",N=()=>({"Content-Type":"application/json",Authorization:`Bearer ${H()}`});o.useEffect(()=>{A()},[]);const A=async()=>{try{const[w,V,M,I]=await Promise.all([fetch("https://application-backend-4anj.onrender.com/api/classes",{headers:N()}),fetch("https://application-backend-4anj.onrender.com/api/teachers",{headers:N()}),fetch("https://application-backend-4anj.onrender.com/api/students",{headers:N()}),fetch("https://application-backend-4anj.onrender.com/api/item",{headers:N()})]),[L,O,Z,D]=await Promise.all([w.json(),V.json(),M.json(),I.json()]);h(L.length),g(O.length),u(Z.length),a(D.length)}catch{c("No se pudieron cargar las métricas. Recarga la página.")}finally{d(!1)}};return x?e.jsx(E,{color:"danger",children:x}):e.jsx("div",{className:"admin-main-music",children:e.jsxs(T,{className:"mb-4",children:[e.jsx(W,{className:"d-flex justify-content-between align-items-center",children:e.jsxs("div",{children:[e.jsx("h4",{className:"mb-0",children:"Escuela de Música Harmonia"}),e.jsxs("small",{className:"text-medium-emphasis",children:["Panel de Administración - ",new Date().toLocaleDateString()]})]})}),e.jsxs(R,{children:[e.jsxs(S,{className:"g-4 mb-4",children:[e.jsx(y,{xs:12,sm:6,xl:3,children:e.jsx(f,{color:"primary",icon:e.jsx(C,{icon:z,height:36}),title:"Estudiantes",value:n?"Cargando...":s.toString(),progress:e.jsx(v,{height:4,value:75,color:"primary",className:"mt-2"})})}),e.jsx(y,{xs:12,sm:6,xl:3,children:e.jsx(f,{color:"warning",icon:e.jsx(C,{icon:U,height:36}),title:"Profesores",value:n?"Cargando...":t.toString(),progress:e.jsx(v,{height:4,value:90,color:"warning",className:"mt-2"})})}),e.jsx(y,{xs:12,sm:6,xl:3,children:e.jsx(f,{color:"success",icon:e.jsx(C,{icon:F,height:36}),title:"Cursos Activos",value:n?"Cargando...":l.toString(),progress:e.jsx(v,{height:4,value:60,color:"success",className:"mt-2"})})}),e.jsx(y,{xs:12,sm:6,xl:3,children:e.jsx(f,{color:"info",icon:e.jsx(C,{icon:$,height:36}),title:"Instrumentos",value:n?"Cargando...":m.toString(),progress:e.jsx(v,{height:4,value:45,color:"info",className:"mt-2"})})})]}),e.jsx(S,{children:e.jsx(y,{md:12,children:e.jsxs(E,{color:"info",className:"mb-0",children:[e.jsx(C,{icon:q,className:"me-2"}),"Bienvenido al panel de administración de la escuela de música. Puedes ver tus estadísticas principales arriba."]})})})]})]})})};export{ie as default};
